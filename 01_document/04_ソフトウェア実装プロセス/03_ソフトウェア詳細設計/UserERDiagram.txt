@startuml
title User ER diagram
skinparam classAttributeIconSize 0

package "MySQL" as ext <<Database>> {
    entity user <<ä¸»,FFAA00)>> {
        + user_id [PK]
        ---
        # encoded_password
        user_name
        extended_authentication_id [FK]
        remaining_ticket_id [FK]
    }
    
    entity extended_authentication <<T,FFAA00)>> {
        extended_authentication_id [PK]
        ---
        extended_authentication_value
    }
    
    entity user_has_role <<T, FFAA00>> {
        user_id [PK]
        role_id [PK]
        ---
    }
    
    entity role_has_permission <<T, FFAA00>> {
        role_id [PK]
        permission_id [PK]
        ---
    }

    entity permission <<T, FFAA00>> {
        permission_id [PK]
        ---
        permission_alias
        permission_name
    }
    
    entity role <<T, FFAA00>> {
        role_id [PK]
        ----
        role_alias
        role_name
    }
    
    entity remaining_ticket <<T, FFAA00>> {
        remaining_ticket_id [PK]
        ----
        remaining_dolce
        remaining_barista
    }
}

user -down--- extended_authentication
user -down-|{ user_has_role
user -down- remaining_ticket
user_has_role }|-down- role
role -down-|{ role_has_permission
role_has_permission }|-down- permission
@enduml

' ref 
' https://qiita.com/HHFactory/items/0fcdb0dd2543d46a78fd
' https://qiita.com/kawasima/items/8dd7eda743f2fdcad78e